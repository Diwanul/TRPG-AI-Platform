# 快速参考卡片

快速查找关键信息。

---

## 🎯 项目一句话总结

**TRPG AI IDE** = 使用 AI 和 Prompt Engineering 驱动的 TRPG 游戏平台，具有完整的外置记忆系统和资源集成。不是游戏引擎，而是创意工具。

---

## 📦 核心组件

| 组件 | 作用 | 实现方式 |
|------|------|--------|
| **UI** | 游戏界面、角色卡、记忆库 | Vue 3 + 自定义 CSS |
| **AI** | DM 的"大脑" | OpenAI / Claude API |
| **记忆** | 游戏历史和角色信息 | IndexedDB + 内存 |
| **资源** | 规则、怪物、法术等 | JSON + API |

---

## 🔑 关键 Prompt（核心）

```
你是一个经验丰富的TRPG游戏主持人。

核心原则：
1. 自由度优于规则
2. 智能难度调整
3. 故事连贯性
4. 明确的反馈

每次回应包含：
【场景描述】
【掷骰检定（如需）】
【结果描述】
【故事推进】
【可能的选项】
```

---

## 📊 技术栈

```
前端: Vue 3 + Vite + TypeScript
状态: Pinia
数据: IndexedDB
样式: 自定义 CSS
部署: GitHub Pages + GitHub Actions
AI: OpenAI API / Claude API
```

---

## 💾 文件清单

| 文件 | 内容 | 优先级 |
|------|------|--------|
| `TRPG_AI_Platform_Plan.md` | 方案规划 | ⭐⭐⭐ |
| `PROMPTS.md` | DM Prompt 系统 | ⭐⭐⭐ |
| `RESOURCES.md` | 资源集成指南 | ⭐⭐ |
| `IMPLEMENTATION_GUIDE.md` | 编码指南 | ⭐⭐⭐ |
| `00_START_HERE.md` | 总结和下一步 | ⭐⭐⭐ |

---

## 🚀 MVP（最小可行产品）清单

- [ ] 项目初始化（Vite + Vue）
- [ ] AI 服务集成
- [ ] 游戏循环（输入 → AI → 输出）
- [ ] 角色卡保存（Markdown）
- [ ] 基础记忆（IndexedDB）
- [ ] GitHub Pages 部署

**时间**: 1-2 周

---

## 🎲 游戏流程

```
1. 用户输入 API Key → 系统初始化
2. 选择规则系统和风格 → 加载对应 Prompt
3. 创建或导入角色 → 初始化记忆库
4. 开始游戏：
   玩家输入行动
   ↓
   系统构建上下文（历史 + 角色 + 资源）
   ↓
   调用 AI DM
   ↓
   AI 返回场景描述和结果
   ↓
   记录到记忆库
   ↓
   显示给玩家
```

---

## 📝 Prompt 选择矩阵

| 需求 | 推荐 Prompt | 特点 |
|------|---------|------|
| 新手友好 | 基础 DM | 平衡难度，多解释 |
| 高难度 | 严肃冒险 | 死亡真实，后果严重 |
| 娱乐 | 幽默轻松 | 荒诞接受，乐趣优先 |
| 自由探索 | 沙盒探索 | 少线性故事，多自由 |
| 战术爱好 | 战术细节 | 详细战斗，智能敌人 |

---

## 🔗 关键 API 端点

| API | 用途 | 示例 |
|-----|------|------|
| OpenAI | AI 调用 | `POST /v1/chat/completions` |
| D&D 5e API | 怪物和规则 | `GET https://www.dnd5eapi.co/api/monsters` |
| BCDice-API | 骰子掷骰 | `POST /api/v2/roll` |

---

## 📚 重要概念

### 外置记忆
- 游戏的所有事件都被记录
- AI 能引用完整历史
- 玩家能回顾和分析

### IDE 类比
```
TextEditor + Compiler = IDE
UI + AI + Resources = TRPG IDE
```

### 记忆精简
由于 Token 限制，系统自动生成：
```
【角色概要】
【最近事件（5 个）】
【重要 NPC】
【当前目标】
【完整历史（最后 20 条）】
```

---

## ⚡ 快速集成清单

### Phase 1（必需）
- [ ] 基础 DM Prompt
- [ ] OpenAI 集成
- [ ] IndexedDB 存储

### Phase 2（推荐）
- [ ] BCDice-API 集成
- [ ] 5e 基础数据
- [ ] 搜索功能

### Phase 3（可选）
- [ ] 多个规则系统
- [ ] 社区 Prompt 库
- [ ] 多人游戏

---

## 🎨 UI 布局

```
┌─────────────────────────────────────┐
│          导航栏（首页/游戏/记忆/资源/设置）     │
├──────────────────────┬──────────────┤
│                      │              │
│   游戏聊天窗口       │  角色卡      │
│  (AI DM + 玩家)     │ (Markdown)   │
│                      │              │
├──────────────────────┴──────────────┤
│  输入框 [你的行动...]      [发送]    │
└─────────────────────────────────────┘
```

---

## 🔐 安全考虑

```
✅ API Key：用户在客户端输入，不上传到服务器
✅ 数据：完全存储在浏览器（IndexedDB），不同步到服务器
✅ 隐私：用户完全控制自己的数据

⚠️ 注意：
- API Key 直接在浏览器中使用
- 建议用户使用专用的 API Key（有支出限制）
- 可选：实现代理以隐藏 Key（后期）
```

---

## 📈 预期性能

| 操作 | 延迟 | 注意 |
|------|------|------|
| AI 响应 | 3-10 秒 | 取决于 API 响应 |
| 记忆查询 | < 100ms | IndexedDB 查询 |
| 页面加载 | < 2 秒 | Vite 优化 |
| 骰子掷骰 | 1-5 秒 | BCDice API 调用 |

---

## 🌍 多语言支持（未来）

当前：中文界面
计划：
- [ ] 英文
- [ ] 日文
- [ ] 法文

---

## 📊 成本分析

| 服务 | 成本 | 备注 |
|------|------|------|
| GitHub Pages | $0 | 无限 |
| 开发时间 | 自付 | 1-2 周 MVP |
| AI API | 用户付 | 每 100 万 Token 约 $0.01-0.1 |
| 域名 | 可选 | 可用 .io 免费方案 |
| **总计** | **$0** | 平台成本为零 |

---

## ✅ 验收标准（MVP）

- [ ] 用户能进行完整的游戏回合
- [ ] AI DM 能理解玩家行动并响应
- [ ] 游戏历史能被保存和检索
- [ ] 角色卡能被编辑和导出
- [ ] 系统能在线部署和访问
- [ ] 无需后端服务器
- [ ] 代码易于扩展和维护

---

## 🎓 推荐学习顺序

1. **阅读方案** (30 分钟)
   → 理解 IDE 概念

2. **学习 Prompt** (1-2 小时)
   → 理解 DM 系统

3. **环境配置** (30 分钟)
   → Node.js + Git + Editor

4. **开发 Phase 1** (3-5 天)
   → 基础游戏循环

5. **测试和优化** (2-3 天)
   → 磨练细节

6. **资源集成** (可选，3-5 天)
   → 添加数据和工具

---

## 🎯 成功标志

✅ **Day 1**: 项目初始化，开发环境准备
✅ **Day 3**: 基础 UI 和 AI 集成
✅ **Day 5**: 完整游戏循环可用
✅ **Week 2**: MVP 部署，可在线游玩
✅ **Week 3**: 资源集成，记忆优化

---

## 📞 快速求助

**问题**: 不知道从哪开始
**答案**: 打开 `00_START_HERE.md`

**问题**: Prompt 怎么写
**答案**: 参考 `PROMPTS.md` 的完整示例

**问题**: 代码怎么写
**答案**: `IMPLEMENTATION_GUIDE.md` 有现成的代码

**问题**: 资源如何集成
**答案**: `RESOURCES.md` 列出了所有选项

---

## 🚀 最后检查清单

在开始编码前：

- [ ] 阅读了方案规划（理解 IDE 概念）
- [ ] 理解了 Prompt 系统（知道 DM 如何工作）
- [ ] 准备了 API Key（OpenAI 或 Claude）
- [ ] 安装了必要的工具（Node.js, Git）
- [ ] 创建了 GitHub 仓库（用于部署）
- [ ] 选择了首选 IDE（VS Code 推荐）

**一切就绪？开始编码吧！🎲**

---

**这是您的完整开发指南。祝开发顺利！**
